<div class="card">
    <h6 class="card-header">Site Mapping</h6>
    <div class="card-body">
        <div class="row row-xs">
            <div class="col-md-3">
                <div class="card container ht-120 pd-20">
                    <div class="my-auto">
                        <label for="region">Filter by Region</label>
                        <select id="region" class="form-control" [(ngModel)]="selectedRegion"
                            (ngModelChange)="onRegionChange(selectedRegion, $event)">
                            <option value="ALL">ALL</option>
                            <option *ngFor="let region of regions" [ngValue]="region">{{ region }}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mg-t-10 mg-md-t-0">
                <div class="card ht-120 tx-center bg-pink danger"
                    title="Danger {{ siteStatistics.danger }}/{{ siteStatistics.all }}"
                    (click)="onStatusChange('DANGER', $event)">
                    <div class="my-auto">
                        <h4 class="tx-normal tx-rubik tx-40 tx-spacing--1 mg-b-0">
                            {{ toPercent(siteStatistics.danger, siteStatistics.all) }} %
                        </h4>
                        <span class="tx-16 tx-uppercase tx-semibold tx-spacing-1">Danger</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mg-t-10 mg-md-t-0">
                <div class="card ht-120 tx-center bg-warning warning"
                    title="Warning {{ siteStatistics.warning }}/{{ siteStatistics.all }}"
                    (click)="onStatusChange('WARNING', $event)">
                    <div class="my-auto">
                        <h4 class="tx-normal tx-rubik tx-40 tx-spacing--1 mg-b-0">
                            {{ toPercent(siteStatistics.warning, siteStatistics.all) }} %
                        </h4>
                        <span class="tx-16 tx-uppercase tx-semibold tx-spacing-1">Warning</span>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mg-t-10 mg-md-t-0">
                <div class="card ht-120 tx-center bg-brand-03 normal"
                    title="Normal {{ siteStatistics.normal }}/{{ siteStatistics.all }}"
                    (click)="onStatusChange('NORMAL', $event)">
                    <div class="my-auto">
                        <h4 class="tx-normal tx-rubik tx-40 tx-spacing--1 mg-b-0">
                            {{ toPercent(siteStatistics.normal, siteStatistics.all) }} %
                        </h4>
                        <span class="tx-16 tx-uppercase tx-semibold tx-spacing-1">Normal</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row row-xs">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bd-b-0">
                        <h6>LIST {{ selectedRegion }} SITES</h6>
                        <p class="tx-13 tx-color-03 mg-b-0">
                            Status: {{ selectedStatus }}
                        </p>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover mg-b-0">
                            <thead>
                                <tr>
                                    <th class="wd-150">Site Name</th>
                                    <th>Type</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let site of filteredSites" (click)="focusTo(site, $event)"
                                    (mouseenter)="focusTo(site, $event)">
                                    <td>{{ site.name }}</td>
                                    <td>{{ site.type }}</td>
                                    <td class="tx-right">
                                        <button class="btn btn-sm btn-primary"
                                            (click)="openModalSiteDetail(site, $event)">Detail</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div style="height: 500px;" leaflet [leafletOptions]="mapOptions"
                    (leafletMapReady)="onMapReady($event)"></div>
            </div>
        </div>
    </div>
</div>